# Quiz Retake Flow
# Tests the ability to retake the quiz after completion
#
# Run: maestro test maestro/flows/quiz/retake-quiz.yaml

url: ${URL}
name: "Quiz - Retake Flow"
tags:
  - quiz
  - reset
---

# ============================================
# Setup: Complete full quiz
# ============================================
- launchApp

- scrollUntilVisible:
    element: "Create Your Video Project"
    direction: DOWN
    timeout: 10000

- tapOn: "Get Started"

# Complete quiz with first set of choices
- tapOn: "Tech"
- tapOn: "Consumers"
- tapOn: "Animation"
- tapOn: "Playful"
- tapOn: "Reels"

- assertVisible:
    text: "Our Recommendation"
    timeout: 15000

- takeScreenshot: "first-recommendation"

# ============================================
# Test 1: Retake quiz from recommendation
# ============================================
- tapOn: "Retake Quiz"

- assertVisible: "Create Your Perfect Video"
- assertVisible: "Get Started"

# ============================================
# Test 2: Complete with different choices
# ============================================
- tapOn: "Get Started"

- tapOn: "Healthcare"
- tapOn: "Investors"
- tapOn: "Live Action"
- tapOn: "Emotional"
- tapOn: "Demo"

- assertVisible:
    text: "Our Recommendation"
    timeout: 15000

- takeScreenshot: "second-recommendation"

# ============================================
# Test 3: Submit another inquiry after first
# ============================================
- tapOn: "Start This Project"

- tapOn:
    id: "contactName"
- inputText: "Jane Smith"

- tapOn:
    id: "contactEmail"
- inputText: "jane@example.com"

- tapOn: "Send Me a Proposal"

- assertVisible:
    text: "Inquiry Submitted!"
    timeout: 10000

# ============================================
# Test 4: Submit another inquiry button works
# ============================================
- tapOn: "Submit Another Inquiry"

- assertVisible: "Create Your Perfect Video"
- assertVisible: "Get Started"

- takeScreenshot: "retake-flow-complete"

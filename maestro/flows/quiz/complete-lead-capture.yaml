# Lead Capture Quiz - Complete Happy Path
# Tests the full user journey from landing to inquiry submission
#
# Flow: Welcome -> 5 Quiz Questions -> Recommendation -> Contact Form -> Success
#
# Run: maestro test maestro/flows/quiz/complete-lead-capture.yaml

url: ${URL}
name: "Lead Capture Quiz - Complete Flow"
tags:
  - quiz
  - lead-gen
  - critical
  - smoke
---

# ============================================
# Step 1: Navigate to Quiz Section
# ============================================
- launchApp

- scrollUntilVisible:
    element: "Create Your Video Project"
    direction: DOWN
    timeout: 10000

- assertVisible: "Answer 5 quick questions"

# ============================================
# Step 2: Welcome Screen
# ============================================
- assertVisible: "Create Your Perfect Video"
- assertVisible: "Tell us about your project"

- tapOn: "Get Started"

# ============================================
# Step 3: Quiz Question 1 - Niche
# ============================================
- assertVisible: "What's your niche?"
- assertVisible: "1 of 5"

- tapOn: "Tech"

# ============================================
# Step 4: Quiz Question 2 - Target Audience
# ============================================
- assertVisible: "Who's your target audience?"
- assertVisible: "2 of 5"

- tapOn: "Businesses"

# ============================================
# Step 5: Quiz Question 3 - Video Style
# ============================================
- assertVisible: "What kind of video style appeals to you?"
- assertVisible: "3 of 5"

- tapOn: "Motion Graphics"

# ============================================
# Step 6: Quiz Question 4 - Mood/Tone
# ============================================
- assertVisible: "What mood or tone best fits your message?"
- assertVisible: "4 of 5"

- tapOn: "Corporate"

# ============================================
# Step 7: Quiz Question 5 - Duration
# ============================================
- assertVisible: "What's your ideal duration?"
- assertVisible: "5 of 5"

- tapOn: "Explainer"

# ============================================
# Step 8: Recommendation Screen
# ============================================
- assertVisible:
    text: "Our Recommendation"
    timeout: 15000

- assertVisible: "Start This Project"

- tapOn: "Start This Project"

# ============================================
# Step 9: Contact Form
# ============================================
- assertVisible: "Almost There!"
- assertVisible: "Full Name"
- assertVisible: "Email Address"

# Fill in required fields
- tapOn:
    id: "contactName"
- inputText: ${TEST_NAME}

- tapOn:
    id: "contactEmail"
- inputText: ${TEST_EMAIL}

# Fill in optional fields
- tapOn:
    id: "companyName"
- inputText: ${TEST_COMPANY}

- tapOn:
    id: "contactPhone"
- inputText: ${TEST_PHONE}

- tapOn:
    id: "projectNotes"
- inputText: ${TEST_NOTES}

# Submit the form
- tapOn: "Send Me a Proposal"

# ============================================
# Step 10: Success Screen
# ============================================
- assertVisible:
    text: "Inquiry Submitted!"
    timeout: 10000

- assertVisible: "Your Inquiry Number"
- assertVisible: "What Happens Next?"
- assertVisible: "Track My Inquiry"

# Verify email confirmation text
- assertVisible: ${TEST_EMAIL}

# ============================================
# Test Complete
# ============================================
- evalScript: |
    const duration = Date.now() - output.startTime;
    console.log(`Test completed in ${duration}ms`);

- takeScreenshot: "quiz-success-screen"
